{% extends "base.html" %}

{% block content %}
  <div class="container">
    <form id="upload-form" action="{{ upload_args.action }}" method="post" enctype="multipart/form-data" class="form-horizontal">
      {% for field in upload_args.fields %}
      <input type="hidden" name="{{ field.name }}" value="{{ field.value }}">
      {% endfor %}
      <div class="form-group">
        <label for="file" class="col-sm-2 control-label">Select file</label>
        <div class="col-sm-10">
          <input id="file" type="file" name="file" class="form-control" required autofocus>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <input type="submit" value="Upload" class="btn btn-primary">
        </div>
      </div>
    </form>
    <div id="status"></div>
  </div>

  <div class="container">
    <h2>Metadata</h2>
    <form id="metadata-form" action="{{ url_for('video.upload_complete') }}" method="post" class="form-horizontal">
      {{ upload_form.csrf_token }}
      <input id="videoid" type="hidden" name="videoid" value="">
      <input id="filename" type="hidden" name="filename" value="">
      <div class="form-group">
        <label for="title" class="col-sm-2 control-label">Title</label>
        <div class="col-sm-10">
          <input id="title" type="text" name="title" class="form-control" placeholder="Video title" required>
        </div>
      </div>
      <div class="form-group">
        <label for="category" class="col-sm-2 control-label">Category</label>
        <div class="col-sm-10">
          <select name="category" class="form-control" placeholder="Category">
            <option value="" default selected></option>
            {% for group in upload_form.category.grouped_choices %}
            <optgroup label="{{ group.name }}">
              {% for category in group.sub_categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
              {% endfor %}
            </optgroup>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <input type="submit" value="Set" class="btn btn-default">
        </div>
      </div>
    </form>
  </div>


{% endblock %}

{% block bottomjs %}
  {{ super() }}
  {% assets filters="rjsmin", output="gen/upload.%(version)s.js",
    "assets-old/js/upload.js"
   %}
  <script src="{{ ASSET_URL }}"></script>
  {% endassets %}
{% endblock %}
