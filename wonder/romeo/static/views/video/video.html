
<div ng-controller="VideoCtrl" class="cf">

  <div class="video-view__nav-placeholder" ng-hide="$root.isCollaborator">
    <video-navigation is-edit="isEdit" is-owner="isOwner"></video-navigation>
  </div>

  <div class="configurable-layout configurable-layout-{{ $root.layoutMode }} cf">

    <div class="layout-block layout-block__primary layout-block-primary--{{ $root.layoutMode }}">

      <section class="main-view video-view">

        <profile-video-hero ng-show="isCollaborator" account="video.account"></profile-video-hero>

        <h2 class="video-view__title"
          data-placeholder="{{ titlePlaceholder }}"
          medium-editor
          options="{ disableToolbar : true, forcePlainText : true, disableReturn : true }"
          ng-model="video.title"
          ng-show="isEdit">
        </h2>
        <h3 class="video-view__sub-title"
          data-placeholder="{{ straplinePlaceholder }}"
          medium-editor
          options="{ disableToolbar : true, forcePlainText : true, disableReturn : true }"
          ng-model="video.strapline"
          ng-show="isEdit">
        </h2>

        <h2 class="video-view__title" ng-hide="isEdit" ng-bind-html="video.title"></h2>
        <h3 class="video-view__sub-title" ng-hide="isEdit" ng-bind-html="video.strapline"></h2>

        <div class="video-view__container">
          <video-upload ng-show="showUpload && isEdit" ng-cloak></video-upload>
          <video-player ng-show="hasProcessed" embed-url="embedUrl"></video-player>
          <video-edit ng-show="showVideoEdit && isEdit"></video-edit>
          <video-color-picker player-parameters="playerParameters" video-id="{{ video.id }}" ng-show="showColorPicker && isEdit"></video-color-picker>
          <video-thumbnail ng-show="showPreviewSelector && isEdit"></video-thumbnail>
        </div>

        <video-more-link
          text="video.link_title"
          url="video.link_url"
          is-edit="{{ isEdit }}"
          ng-show="(isEdit || video.link_title && video.link_url) && !isComments">
        </video-more-link>

        <section class="video-view__description video-medium"
          ng-class="{ 'video-view__description--edit' : isEdit }"
          data-placeholder="{{ descriptionPlaceholder }}"
          medium-editor
          options="{ buttons : ['bold', 'italic', 'header1', 'header2', 'unorderedlist', 'quote'], firstHeader : 'h2', secondHeader : 'h3' }"
          ng-model="video.description"
          ng-show="isEdit">
        </section>

        <section
          class="video-view__description video-medium"
          ng-bind-html="video.description"
          ng-hide="isComments || isEdit">
        </section>

        <video-share
          video="video"
          has-tags="{{ video.tags && video.tags.items && video.tags.items.length > 0 }}"
          ng-hide="isComments"
          video-id="{{ video.id }}">
        </video-share>

        <video-extended-controls ng-show="isEdit"></video-extended-controls>

        <video-download video-id="video.id" ng-show="video.id && $root.isCollaborator && canDownload"></video-download>

        <div class="video-view__save-controls" ng-show="isEdit">
          <a ng-click="cancel()" class="button">cancel</a>
          <a ng-click="save()" class="button button--primary">save changes</a>
        </div>

      </section>

    </div>

    <div class="layout-block layout-block__secondary layout-block-secondary--{{ $root.layoutMode }}">

      <section class="cf video-view__comments" ng-show="video.id && isComments || (video.id && $root.isCollaborator && canComment)">
        <video-indicators comments="comments" current-time="videoCurrentTime" total-time="videoTotalTime"></video-indicators>
        <video-frame-stepper current-time="videoCurrentTime"></video-frame-stepper>
        <video-collaborators notified="notified" ng-show="video.id && isComments && $root.layoutMode !== 'column'" collaborators="collaborators" video-id="{{ video.id }}"></video-collaborators>
      </section>

    </div>

    <div class="layout-block layout-block__tertiary layout-block-tertiary--{{ $root.layoutMode }}">
      <section class="cf video-view__comments" ng-show="video.id && isComments || (video.id && $root.isCollaborator && canComment)">
        <video-collaborators notified="notified" ng-show="video.id && isComments && $root.layoutMode === 'column'" collaborators="collaborators" video-id="{{ video.id }}"></video-collaborators>
        <video-comments notified="notified" is-owner="isOwner" comments="comments" video-id="{{ video.id }}" current-time="videoCurrentTime"></video-comments>
      </section>
    </div>

  </div>

<video-comments-control></video-comments-control>
  <layout-control></layout-control>

</div>





