<section class="video-feedback video-feedback--{{ $root.layoutMode }}">

  <section
    class="video-feedback__form"
    ng-class="{ 'video-feedback__form--active' : inputActive }">
    <section class="video-feedback__input-container">

      <div class="media  video-feedback__comment">
        <a class="media__img  video-feedback__comment-profile-image" ng-style="{ 'background-image' : 'url(' + user().avatar + ')' }" ng-show="isLoggedIn()"></a>
        <a class="media__img  video-feedback__comment-profile-image" style="background-image: url('{{ user().avatar_url }}');" ng-show="isCollaborator()"></a>
        <div class="media__body">
          <div class="video-feedback__comment-details">
            <span class="video-feedback__comment-name" ng-show="isLoggedIn()">{{ user().display_name }}</span>
            <span class="video-feedback__comment-name" ng-show="isCollaborator()">{{ user().username }}</span>
          </div>
          <div class="video-feedback__comment-content">
            <span class="video-feedback__comment-timestamp">
              @<a class="video-feedback__comment-timestamp-link" ng-bind="(videoCurrentTime | time)"></a>
            </span>
            <div class="video-feedback__comment-text">
              <textarea class="video-feedback__input js-video-feedback-input"
                placeholder="Hit the space bar to timestamp your comment and pause the video&hellip;"
                ng-model="commentText"
                ng-class="{ 'video-feedback__input--active' : inputActive }"
                ng-focus="inputActive = true"
                ng-blur="inputActive = false"
                focus="inputActive">
              </textarea>
            </div>
          </div>
        </div>
      </div>
      <a class="video-feedback__button btn  btn--small btn--positive push-bottom"
        ng-click="addComment()">
        submit
      </a>
    </section>

  </section>

  <section class="video-feedback__comments">

    <div class="video-feedback__comments-filter">
      <label>
        <span class="video-feedback__comments-filter-label">View:</span>
        <select class="video-feedback__comments-filters btn btn--small" ng-model="filterResolved">
          <option class="video-feedback__comments-filter" value="" selected="selected">All</option>
          <option class="video-feedback__comments-filter" value="false">Unresolved</option>
        </select>
      </label>
    </div>

    <ul class="video-feedback__comments-list" id="video-comments-list-{{ $root.layoutMode }}">
      <li id="comment-{{ comment.id }}"
        class="video-feedback__comment"
        ng-class="{ 'video-feedback__comment--active' : isTimeSync(comment.timestamp) }"
        ng-repeat="comment in comments | orderBy : 'timestamp' | filter: { resolved : filterResolved }">
          <div class="media" ng-class="{ 'video-feedback__comment--resolved' : comment.resolved }">
            <a class="media__img  video-feedback__comment-profile-image" style="background-image: url('{{ comment.avatar_url }}');"></a>
            <div class="media__body">
              <div class="video-feedback__comment-details">
                <span class="video-feedback__comment-name" ng-bind="comment.username"></span>
                <span class="video-feedback__comment-time-posted" ng-bind="comment.datetime | prettyDate"></span>
                <span class="video-feedback__comment-resolved" ng-class="{ 'video-feedback__comment-resolved--active' : replyActive && comment.resolved }">resolved</span>
              </div>
              <div class="video-feedback__comment-content">
                <span class="video-feedback__comment-timestamp" ng-show="!isNaN(comment.timestamp)">
                  @<a class="video-feedback__comment-timestamp-link" ng-click="videoSeek(comment.timestamp)" ng-bind="(comment.timestamp | time)"></a>
                </span>
                <div class="video-feedback__comment-text">
                  {{ comment.comment }}
                </div>
              </div>
            </div>
          </div>
        <div class="video-feedback__comment-controls">
          <a class="video-feedback__reply-link"
            ng-hide="comment.resolved"
            ng-click="reply(comment.timestamp)">
            reply
          </a>
          <a class="video-feedback__resolve-link"
            ng-hide="comment.resolved || !flags.isOwner"
            ng-click="resolve(comment.id)">
            resolve
          </a>
          <a class="video-feedback__resolve-link"
            ng-show="comment.resolved && flags.isOwner"
            ng-click="unresolve(comment.id)">
            reopen
          </a>
        </div>
      </li>
    </ul>

  </section>

</section>



